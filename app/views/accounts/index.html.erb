<section class="page group">
<ul class="nav-side-bar">
    <li><a href="<%= user_url(current_user) %>">My Profile</a></li>
    <li><a href="<%= edit_user_url(current_user) %>">Edit Profile</a></li>
    <li><a href="<%= accounts_url %>">Accounts</a></li>
    <li><a href="<%= user_url(current_user) %>">Settings</a></li>
    <li><a href="<%= user_url(current_user) %>">Email Settings</a></li>
    <li><a href="<%= user_url(current_user) %>">Notification Settings</a></li>
</ul>

<section class="page-content">
  <header class="user-header">
    <h3 class="page-title"><%= current_user.username %>'s Accounts</h3>
  </header>

  <a href="<%= new_account_url %>">Add Account</a>

  <table class="accounts-table">
    <thead>
      <th>Bank Name</th>
      <th>Account Name</th>
      <th>Account Type</th>
      <th>Balance</th>
    </thead>
    <% @accounts.each do |account| %>
      <tr>
        <td><a href="<%= account_url(account) %>"><%= account.account_name %></a></td>
        <td><%= account.bank.name %></td>
        <td><%= ACCOUNT_TYPES[account.account_type] %></td>
        <td>$<%= account.balance %></td>
      </tr>
    <% end %>
      <td class="total"></td>
      <td class="total"></td>
      <td class="total">Total:</td>
      <td>
        $<%= @accounts.inject(0) do |n, account| %>
          <%n += account.try(:account_type) == 2 ? -1 * (account.try(:balance)) : account.try(:balance) %>
        <% end %>
      </td>

  </table>
</section>
</section>